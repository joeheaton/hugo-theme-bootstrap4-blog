<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "{{ if eq .Type "page" }}Blog{{ else if eq .Type "post" }}BlogPosting{{ else }}Page{{ end }}",
  "headline": "{{ substr .Title 0 110 }}",
  "url": "{{ printf "%s" .Permalink }}",
  "wordCount": "{{ .WordCount }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Params.author | default .Site.Params.author }}"
  }

  {{- if or (.Params.keywords) (or (.Params.categories) (.Params.tags)) -}}
    , "keywords": "{{ delimit (union .Params.keywords (union .Params.categories .Params.tags)) ", " }}"
  {{- end }}

  {{- with .Params.description -}}
    , "description": "{{ . }}"
  {{- end }}

  {{- with .Params.images -}}
    {{ range first 1 . }}
      , "image": {
      "@type": "ImageObject",
      "url": "{{ . | absURL }}"
      {{- /* Don't try to get imageConfig if image param is not local */ -}}
      {{- if not (or (hasPrefix . "http://") (hasPrefix . "https://")) -}}
        {{- with (imageConfig (printf "/static/%s" .)) -}}
        ,
        "height": "{{ .Height }}",
        "width": "{{ .Width }}"
        {{- end -}}
      {{ end }}
      }
    {{- end -}}
  {{ end }}

  {{- $ISO8601 := "2000-01-01T00:00:00-00:00" }}

  {{- if not .PublishDate.IsZero }}
    , "datePublished": {{ .PublishDate.Format $ISO8601 }}
  {{- end }}

  {{- if not .Lastmod.IsZero }}
    , "dateModified": {{ .Lastmod.Format $ISO8601 }}
  {{- end }}
}
</script>